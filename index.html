<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>쿠키런킹덤 쿠폰 자동등록</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Simple line icons-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css" rel="stylesheet" />
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="./css/all.min.css" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0SMVDZN5J0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-0SMVDZN5J0');
    </script>
    <style>
        @font-face {
            font-family: 'cookie';
            src: url(./assets/CookieRun\ Regular.ttf);
        }

        body {
            font-family: "cookie";
        }

        .masthead {
            padding-top: 3rem;
        }
    </style>
</head>

<body id="page-top">
    <!-- Navigation-->
    <a class="menu-toggle rounded" href="#"><i class="fas fa-bars"></i></a>
    <!-- <nav id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand"><a href="#page-top">Start Bootstrap</a></li>
            <li class="sidebar-nav-item"><a href="#page-top">Home</a></li>
            <li class="sidebar-nav-item"><a href="#about">About</a></li>
            <li class="sidebar-nav-item"><a href="#services">Services</a></li>
            <li class="sidebar-nav-item"><a href="#portfolio">Portfolio</a></li>
            <li class="sidebar-nav-item"><a href="#contact">Contact</a></li>
        </ul>
    </nav> -->
    <!-- Header-->

    <header class="masthead d-flex align-items-center" style="background:var(--bs-danger); height:100vh;">
        <div class="container px-4 px-lg-5 text-center">
            <div class="row col-12">
                <div class="col-12 col-md-6">
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <div id="lottie"></div>
                    <lottie-player style="width: 100%; height: auto;" src="https://assets3.lottiefiles.com/private_files/lf30_fkr3mini.json" mode="bounce" background="transparent" speed="1.5" style="width: 300px; height: 300px;" loop autoplay></lottie-player>

                </div>

                <div class="col-12 col-md-6" style="padding-left:6vw;">
                    <h1 class="mb-1" style=" color: white;font-size: 2.3em;margin-top: 8vw;;">쿠키런 킹덤</h1>
                    <h2 class="mb-5" style="color:white; font-size:1.5em;">자동 쿠폰 등록</h2>
                    <input id="email" type="email" style="width: 80%;text-align: left; margin: 10%;margin-top: 0; font-size:2vh;" placeholder="email">
                    <a onclick="next()" class="btn btn-primary btn-xl" href="#">쿠폰 등록하기</a>

                </div>
            </div>


        </div>
    </header>

    <!-- About-->
    <section class="content-section bg-light" id="about">
        <div class="container px-4 px-lg-5 text-center">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <style>
                    .rowSt {
                        margin-top: 4vw;
                    }

                    .inputSt {
                        width: 80%;
                    }

                    .inputSt2 {
                        width: 60%;
                    }

                    .calcul {}

                    .card {
                        margin-top: 3vw;
                    }

                    .first {
                        margin-top: 3vw;
                    }

                    input {
                        text-align: right;
                    }

                    input::placeholder {
                        color: #6c757d;
                        text-align: left;
                    }

                    input:read-only {
                        background-color: #e9ecef;
                        border: 0;
                        color: #6c757d;
                    }

                    .btn-xl {
                        padding: 1.25rem 2.5rem;
                        margin: 0.5vw;
                    }
                </style>


                <!-- Footer-->
                <footer class="footer text-center">
                    <div class="container px-4 px-lg-5">
                        <ul class="list-inline mb-5">
                            <li class="list-inline-item">
                                <a class="social-link rounded-circle text-white mr-3" href="https://github.com/jongmal"><i class="fab fa-github"></i></a>
                            </li>
                            <!--
                <li class="list-inline-item">
                    <a class="social-link rounded-circle text-white mr-3" href="#!"><i class="icon-social-twitter"></i></a>
                </li>
                <li class="list-inline-item">
                    <a class="social-link rounded-circle text-white" href="#!"><i class="icon-social-github"></i></a>
                </li> -->
                        </ul>
                        <p>개인정보 취급 방침 : 해당 사항 없음(미수집)</p>
                        <p class="text-muted small mb-0">Copyright &copy; 김또띤 2021</p>
                    </div>
                </footer>
                <!-- Scroll to Top Button-->
                <a class="scroll-to-top rounded" href="#page-top"><i class="fas fa-angle-up"></i></a>
                <!-- Bootstrap core JS-->
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
                <!-- Core theme JS-->
                <script src="js/scripts.js"></script>
</body>

<script>
  var data = [{
            'name': '500 크리스탈 쿠폰',
            'code': 'REALTOUGHCOOKIES'
        },
        {
            'name': '삼성 쿠폰',
            'code': 'SAMSUNGCRKINGDOM'
        }, {
            'name': '소닉 쿠폰',
            'code': 'KINGDOMWITHSONIC'
        }, {
            'name': '재배노움 쿠폰1',
            'code': 'GETUR1SUGARGNOME'
        }, {
            'name': '재배노움 쿠폰2',
            'code': 'GETUR3SUGARGNOME'
        }, {
            'name': '재배노움 쿠폰3',
            'code': 'GETUR5SUGARGNOME'
        }, {
            'name': '재배노움 쿠폰4',
            'code': 'GETUR7SUGARGNOME'
        }
    ];

    function next() {
        var str = "";
        var email = $("#email").val();
        let timerInterval;
        Swal.fire({
            title: '쿠폰 불러오는 중',
            html: ' <b></b> 밀리초 남음.',
            timer: 2000,
            timerProgressBar: true,
            didOpen: () => {
                Swal.showLoading()
                const b = Swal.getHtmlContainer().querySelector('b')
                timerInterval = setInterval(() => {
                    b.textContent = Swal.getTimerLeft()
                }, 100)
            },
            didRender: () => {
                for (var i = 0; i < data.length; i++) {
                    console.log("post> code:" + data[i].code);
                    $.ajax({
                        url: "https://zotnlnn1.cafe24.com/cookie/proxy.php",
                        type: "POST",
                        dataType: 'json',
                        async: false,
                        data: {
                            cors: "https://account.devplay.com/v2/coupon/ck",
                            method: "POST",
                            email: email,
                            coupon: data[i].code
                        },
                        success: function(json) {
                            console.log(json);
                            var ment = "";
                            var color = "";
                            switch (json.code) {
                                case 20000:
                                    ment = "완료/정상 등록", color = "#198754";
                                    break;
                                case 40006:
                                    ment = "실패/ 이메일 문제", color = "#6c757d";
                                    break;
                                case 42502:
                                    ment = "실패/ 쿠폰 번호", color = "#6c757d";
                                    break;
                                case 42201:
                                case 42503:
                                    ment = "실패/ 이미 사용한 쿠폰", color = "#6c757d";
                                    break;
                                case 42203:
                                case 42504:
                                    ment = "실패/ 이미 사용한 쿠폰", color = "#6c757d";
                                    break;
                                default:
                                    ment = "실패/ 서버측 에러", color = "#6c757d";
                                    break
                            }
                            str += '<a class="btn btn-primary btn-xl" style="background-color:' + color + ';">' + data[i].name + " / " + ment + '</a><br>'
                        },
                        error: function(e) {
                            console.log(e)
                        }
                    })
                }
            },
            willClose: () => {}
        }).then((result) => {
            if (result.dismiss === Swal.DismissReason.timer) {
                Swal.fire({
                    title: '쿠폰 등록 결과',
                    html: str,
                    willClose: () => {
                        clearInterval(timerInterval)
                    }
                })
            }
        })
    }
</script>

<script>
    // let svgContainer = document.querySelector('.lottie1');
    // let animItem = bodymovin.loadAnimation({
    //     wrapper: svgContainer,
    //     animType: 'svg',
    //     loop: true,
    //     style: "width: 90%; height: 90%;",
    //     speed: "1.5",
    //     animationData: JSON.parse(any)
    // });
</script>

</html>